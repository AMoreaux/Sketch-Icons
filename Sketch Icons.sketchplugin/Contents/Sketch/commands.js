function __skpm_run(e,t){that.context=t;var r=function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t){function r(e){return e.reduce(function(e,t){return e.concat(Array.isArray(t)?r(t):t)},[])}Object.defineProperty(t,"__esModule",{value:!0}),t.default={clearSelection:function(e){e.api().selectedDocument.selectedLayers.clear()},getIconNameByNSUrl:function(e){return e.lastPathComponent().split(".")[0]},createLabel:function(e,t,r,n,a){var o=NSTextField.alloc().initWithFrame_(NSMakeRect(t,r,n,a));return o.setEditable_(!1),o.setSelectable_(!1),o.setBezeled_(!1),o.setDrawsBackground_(!1),o.setFont(NSFont.systemFontOfSize_(13)),o.setStringValue_(e),o},getSelectedArtboardsAndSymbols:function(e){var t=[];return e.selection.forEach(function(e){var r=String(e.class());"MSArtboardGroup"===r&&"MSSymbolMaster"===r||(e=e.parentArtboard(),r=String(e.class())),t.push({object:e,type:r})}),t},flatten:r}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{log:function(e){log(e)},debug:function(e){log("DEBUG: "+e)},info:function(e){log("INFO: "+e)},warn:function(e){log("WARN: "+e)},error:function(e){log("ERROR: "+e)}}}()},function(e,t){function r(e,t){if(t.removeAllItems(),!e.title().length())return t.setEnabled(!1);var r=e.representedObject();r.loadSynchronously();var a=[];r.document().localSymbols().forEach(function(e){var t=e.layers()[0].style().hasEnabledFill();t&&a.push({color:t?e.layers()[0].style().fills().firstObject().color():null,symbol:e})}),a.length>0?(n(t,a),t.setEnabled(!0)):t.setEnabled(!1)}function n(e,t){var r=NSMenu.alloc().init();return r.cancelTracking(),t.forEach(function(e){var t=NSMenuItem.alloc().init();t.title=e.symbol.name(),t.representedObject=e.symbol,t.image=function(e){var t=CGSizeMake(14,14),r=NSImage.alloc().init();r.size=t,r.lockFocus();var n=MSBackgroundColorView.alloc().init();return n.backgroundColor=e,n.drawRect(NSMakeRect(0,0,14,14)),r.unlockFocus(),r}(NSColor.colorWithRed_green_blue_alpha(e.color.red(),e.color.green(),e.color.blue(),e.color.alpha())),r.addItem(t)}),e.menu=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default={getLibs:function(){return AppController.sharedInstance().librariesController().userLibraries().slice().map(function(e){return e})},getLibById:function(e){return AppController.sharedInstance().librariesController().userLibraries().slice().filter(function(t){return String(e)===String(t.libraryID())})[0]},loadColorFromSelectedLib:r,initLibsSelectList:function(e,t){function n(e){e.setCOSJSTargetFunction(function(e){r(e,t)})}var a=NSMenu.alloc().init(),o=NSMenuItem.alloc().init();return o.title="",n(o),a.addItem(o),e.forEach(function(e){var t=NSMenuItem.alloc().init();t.title=e.name(),t.representedObject=e,a.addItem(t),n(t)}),a},initColorSelectList:n}},function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){i(t),l(t),o(e,t,r.color,r.colorLib)}function o(e,t,r,n){s.default.clearSelection(e),librairiesController=AppController.sharedInstance().librariesController(),symbolMaster=librairiesController.importForeignSymbol_fromLibrary_intoDocument(r,n,e.document.documentData()),symbolInstance=symbolMaster.symbolMaster().newSymbolInstance();var a=t.rect();symbolInstance.setHeightRespectingProportions(a.size.height),symbolInstance.setWidthRespectingProportions(a.size.width),symbolInstance.setName("ðŸŽ¨ color"),t.addLayer(symbolInstance),t.layers()[0].prepareAsMask()}function i(e){e.children().forEach(function(e){var t=String(e.class());"MSLayerGroup"!==t&&"MSShapeGroup"!==t||e.ungroup()})}function l(e){var t=MSShapeGroup.shapeWithRect(null);t.setName("container-random-string-9246392"),e.addLayer(t);var r=new RegExp("Shape");e.children().forEach(function(e){var n=String(e.class());if("MSRectangleShape"===n&&"container-random-string-9246392"===String(e.name()))return e.removeFromParent();r.test(n)&&"MSShapeGroup"!==n&&e.moveToLayer_beforeLayer(t,e)}),t.resizeToFitChildrenWithOption(0)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(r(0)),c=(n(r(1)),n(r(2)));t.default={initAddMaskOnSelectedArtboards:function(e,t,r){r.forEach(function(r){a(e,r.object,t)})},addMask:a,createMask:o,formatSvg:i,dedupeLayers:l,getMaskProperties:function(e){var t=e.layers();if(t.length<=1||!t[1].isMasked())return{color:null,colorLib:null};var r=t[1].symbolMaster();return{color:r,colorLib:c.default.getLibById(r.foreignSymbol().libraryID())}}}},function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){t%10==0?(c.position.y+=2*c.size.width,c.position.x=c.size.width):c.position.x+=2*c.size.width;var n=MSArtboardGroup.new();n.setName(i.default.getIconNameByNSUrl(r));var a=n.frame();return a.setWidth(c.size.width),a.setHeight(c.size.height),a.setX(c.position.x),a.setY(c.position.y),e.document.currentPage().addLayers([n]),n}function o(e){var t=e.api().selectedDocument.selectedPage;if(1===t.sketchObject.children().length)c.position.x=c.position.y=2*c.size.width;else{var r=[];t.iterateWithFilter("isArtboard",function(e){r.push(e.sketchObject.origin().y)}),t.sketchObject.symbols().forEach(function(e){r.push(e.origin().y)}),c.position.x=2*c.size.width,c.position.y=Math.max.apply(Math,r)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(0)),l=(n(r(1)),n(r(3))),s=n(r(5));t.default={createArtboard:a,initArtboardsParams:o,initImportIcons:function(e,t){i.default.clearSelection(e),c.size.height=c.size.width=t.artboardSize,o(e);var r=void 0;t.listIcon.forEach(function(n,o){r=a(e,o,n),s.default.addSVG(e,r,t.iconPadding,n),t.withMask&&t.color&&t.colorLib&&l.default.addMask(e,r,t),t.convertSymbol&&MSSymbolMaster.convertArtboardToSymbol(r)}),i.default.clearSelection(e)},getPaddingAndSize:function(e){return{iconPadding:parseInt(e.layers()[0].rect().origin.x),artboardSize:parseInt(e.rect().size.width)}}};var c={position:{x:0,y:0},size:{height:0,width:0}}},function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n){c.default.clearSelection(e);var a=MSSVGImporter.svgImporter(),l=NSURL.fileURLWithPath(n.path());a.prepareToImportFromURL(l);var s=a.importAsLayer();i(s),t.addLayer(s);o(s.frame(),t,r)}function o(e,t,r){var n=t.rect(),a=parseInt(n.size.width),o=parseInt(n.size.height),i=e.width(),l=e.height(),s=void 0,c=void 0,d=void 0;i===l?(e.setWidth(a-2*r),e.setHeight(o-2*r),e.setX(r),e.setY(r)):i>=l?(e.setWidth(a-2*r),e.setX(r),s=(a-2*r)/2+r-(c=(c=l*(o-2*r)/i)<1?1:c)/2,e.setHeight(c),e.setY(s)):(e.setHeight(o-2*r),e.setY(r),s=(o-2*r)/2+r-(d=(d=i*(a-2*r)/l)<1?1:d)/2,e.setWidth(d),e.setX(s))}function i(e){for(var t=e.children(),r=NSPredicate.predicateWithFormat("(className == %@)","MSTextLayer"),n=t.filteredArrayUsingPredicate(r).objectEnumerator(),a=void 0;a=n.nextObject();)a.removeFromParent()}Object.defineProperty(t,"__esModule",{value:!0});var l=n(r(3)),s=n(r(4)),c=n(r(0));t.default={initUpdateIconsSelectedArtboards:function(e,t,r){t.forEach(function(t,n){var o=Object.assign(s.default.getPaddingAndSize(t.object),l.default.getMaskProperties(t.object),{iconPath:r[n]});t.object.removeAllLayers(),a(e,t.object,o.iconPadding,o.iconPath),o.color&&o.colorLib&&l.default.addMask(e,t.object,o),t.object.setName(c.default.getIconNameByNSUrl(o.iconPath))})},addSVG:a,resizeSVG:o,removeTxt:i}},function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(2)),o=n(r(0));t.default={newModal:function(e,t,r){var n=COSAlertWindow.new(),a=NSView.alloc().initWithFrame(NSMakeRect(0,0,t.width,t.height));return n.addAccessoryView(a),n.setMessageText(r.messageText),n.setInformativeText(r.informativeText),n.addButtonWithTitle("Continue"),n.addButtonWithTitle("Cancel"),n.layout(),{modal:n,view:a,viewSize:t}},runModal:function(e){return e.modal.runModal()},getMainButtonParam:function(e){return{button:e}},createArtboardFields:function(){var e=NSTextField.alloc().initWithFrame(NSMakeRect(0,10,130,20));e.setStringValue("24");var t=NSTextField.alloc().initWithFrame(NSMakeRect(140,10,130,20));return t.setStringValue("3"),[{item:e,getter:function(){return parseInt(e.stringValue())},name:"artboardSize",label:o.default.createLabel("Size",0,30,130,20)},{item:t,getter:function(){return parseInt(t.stringValue())},name:"iconPadding",label:o.default.createLabel("Padding",140,30,130,20)}]},createCheckBoxes:function(){var e=NSButton.alloc().initWithFrame(NSMakeRect(0,30,200,14));e.setButtonType(NSSwitchButton),e.setState(!0),e.setFont(NSFont.systemFontOfSize_(13)),e.setTitle("Convert to symbol");var t=NSButton.alloc().initWithFrame(NSMakeRect(0,5,200,14));return t.setButtonType(NSSwitchButton),t.setState(!1),t.setFont(NSFont.systemFontOfSize_(13)),t.setTitle("Add color mask"),[{item:e,name:"convertSymbol",getter:e.state},{item:t,name:"withMask",getter:t.state}]},createMaskFields:function(e){var t=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,0,130,20)),r=NSPopUpButton.alloc().initWithFrame(NSMakeRect(140,0,130,20));return t.setEnabled(!1),r.setEnabled(!1),t.menu=a.default.initLibsSelectList(a.default.getLibs(),r),e?e[1].item.setCOSJSTargetFunction(function(e){e.state()?(t.setEnabled(!0),r.selectedItem()&&r.setEnabled(!0)):(t.setEnabled(!1),r.setEnabled(!1))}):t.setEnabled(!0),[{item:r,label:o.default.createLabel("Color",140,25,130,20),name:"color",getter:function(){var e=this.item.selectedItem();return e?e.representedObject():null}},{item:t,label:o.default.createLabel("Colors Library",0,25,130,20),name:"colorLib",getter:function(){var e=this.item.selectedItem();return e?e.representedObject():null}}]},appendsFields:function(e,t){var r=e.view,n=e.viewSize;t.reverse().forEach(function(e){var t=NSView.alloc().initWithFrame(NSMakeRect(0,50*r.subviews().length,n.width,50));e.forEach(function(e){e.label&&t.addSubview(e.label),t.addSubview(e.item)}),r.addSubview(t)})},getParams:function(e){var t={};return e.forEach(function(e){e.forEach(function(e){t[e.name]=e.getter()})}),t},setNextKey:function(e){e.forEach(function(t,r){e[r+1]&&t.item.setNextKeyView(e[r+1].item)})},newErrorModal:function(e,t){var r=COSAlertWindow.new();r.setMessageText(e),r.setInformativeText(t),r.runModal()}}},function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.importIcons=function(e){var t=d.default.getImportIconsParams(e);1e3===t.button&&(t.listIcon=s.default.selectIconsFiles(),t.listIcon.length&&o.default.initImportIcons(e,t))},t.updateIconsOnSelectedArtboards=function(e){var t=a.default.getSelectedArtboardsAndSymbols(e);if(0===t.length)return l.default.newErrorModal("No artboards selected","Please select one or more artboards to replace icons.");var r=s.default.selectIconsFiles();if(r.length)return t.length>r.length?l.default.newErrorModal("Too much artboards selected","Please select as many artboards as icons."):t.length<r.length?l.default.newErrorModal("Too much icons selected","Please select as many icons as artboards."):void c.default.initUpdateIconsSelectedArtboards(e,t,r)},t.addMaskOnSelectedArtboards=function(e){var t=a.default.getSelectedArtboardsAndSymbols(e);if(0===t.length)return l.default.newErrorModal("No artboards selected","Please select one or more artboards to add a mask.");var r=d.default.getAddMaskOnSelectedArtboardsParams(e);1e3===r.button&&i.default.initAddMaskOnSelectedArtboards(e,r,t)};n(r(1));var a=n(r(0)),o=(n(r(2)),n(r(4))),i=n(r(3)),l=n(r(6)),s=n(r(8)),c=n(r(5)),d=n(r(9))},function(e,t,r){function n(e){var t;return(t=[]).concat.apply(t,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e.slice().map(function(e){return"svg"===e.toString().split(".").pop()?e:NSFileManager.defaultManager().contentsOfDirectoryAtURL_includingPropertiesForKeys_options_error(e,null,null,null).slice().filter(function(e){if("svg"===e.toString().split(".").pop())return!0})})))}Object.defineProperty(t,"__esModule",{value:!0});!function(e){e&&e.__esModule}(r(1));t.default={selectIconsFiles:function(){var e=NSOpenPanel.openPanel();return e.setAllowsMultipleSelection(!0),e.setCanChooseDirectories(!0),e.setAllowedFileTypes(["svg"]),e.setCanChooseFiles(!0),e.setPrompt("Select"),e.runModal()!==NSFileHandlingPanelOKButton?[]:n(e.URLs())},getFilesByUrls:n}},function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(6)),o=n(r(0));t.default={getImportIconsParams:function(e){var t=a.default.newModal(e,{width:300,height:150},{messageText:"Configure your import",informativeText:"Your icons will be arranged in artboards. Set size and padding of your artboards."}),r=a.default.createCheckBoxes(),n=a.default.createMaskFields(r),i=[a.default.createArtboardFields(),r,n];return a.default.appendsFields(t,i),a.default.setNextKey(o.default.flatten(i)),Object.assign(a.default.getMainButtonParam(a.default.runModal(t)),a.default.getParams(i))},getAddMaskOnSelectedArtboardsParams:function(e){var t=a.default.newModal(e,{width:300,height:43},{informativeText:"Select your library and choose a color to apply as mask. Your layers will all be combined.",messageText:"Configure your color mask"}),r=[a.default.createMaskFields()];return a.default.appendsFields(t,r),a.default.setNextKey(o.default.flatten(r)),Object.assign(a.default.getMainButtonParam(a.default.runModal(t)),a.default.getParams(r))}}}]);"default"===e&&"function"==typeof r?r(t):r[e](t)}var that=this;that.importIcons=__skpm_run.bind(this,"importIcons"),that.onRun=__skpm_run.bind(this,"default"),that.updateIconsOnSelectedArtboards=__skpm_run.bind(this,"updateIconsOnSelectedArtboards"),that.addMaskOnSelectedArtboards=__skpm_run.bind(this,"addMaskOnSelectedArtboards");