function __skpm_run(key,context){that.context=context;var exports=function(e){function t(a){if(r[a])return r[a].exports;var i=r[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{log:function(e){log(e)},debug:function(e){log("DEBUG: "+e)},info:function(e){log("INFO: "+e)},warn:function(e){log("WARN: "+e)},error:function(e){log("ERROR: "+e)}}}()},function(e,t,r){function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.reduce(function(e,t){return e.concat(Array.isArray(t)?i(t):t)},[])}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:14,height:14},r=CGSizeMake(t.width,t.height),a=NSImage.alloc().init();a.size=r,a.lockFocus();var i=MSBackgroundColorView.alloc().init();return i.backgroundColor=e,i.drawRect(NSMakeRect(0,0,t.width,t.height)),a.unlockFocus(),a}Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(8)),s=a(r(0));t.default={clearSelection:function(e){e.api().selectedDocument.selectedLayers.clear()},getIconNameByNSUrl:function(e){return e.lastPathComponent().split(".")[0]},createLabel:function(e,t,r,a,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:13,n=NSTextField.alloc().initWithFrame_(NSMakeRect(t,r,a,i));return n.setEditable_(!1),n.setSelectable_(!1),n.setBezeled_(!1),n.setDrawsBackground_(!1),n.setFont(NSFont.systemFontOfSize_(o)),n.setStringValue_(e),n},getSelectedArtboardsAndSymbols:function(e){var t=[];return e.selection.some(function(e){var r=String(e.class());"MSArtboardGroup"===r&&"MSSymbolMaster"===r||(e=e.parentRoot(),r=String(e.class())),-1===t.indexOf(String(e.objectID()))&&t.push({object:e,type:r,id:e.objectID()})}),t=t.filter(function(e,t,r){return t===r.findIndex(function(t){return t.id===e.id})})},flatten:i,getDocumentColors:function(e){return e.document.documentData().assets().colors()},createWebview:function(e,t,r){var a=WebView.alloc().initWithFrame(NSMakeRect(0,0,220,300)),i=a.windowScriptObject(),l=new n.default({"webView:didFinishLoadForFrame:":function(e,t){s.default.log("loaded")},"webView:didChangeLocationWithinPageForFrame:":function(e,a){var n=i.evaluateWebScript("window.location.hash"),s=JSON.parse(decodeURIComponent(n).split("color=")[1]);newColor=MSImmutableColor.colorWithSVGString("rgba("+String(s.r)+","+String(s.g)+","+String(s.b)+","+String(s.a)+")").newMutableCounterpart(),t.setImage(o(NSColor.colorWithRed_green_blue_alpha(parseInt(s.r)/255,parseInt(s.g)/255,parseInt(s.b)/255,parseFloat(s.a)),{width:40,height:30})),r(newColor)}});return a.setDrawsBackground(!1),a.setMainFrameURL_(e.plugin.urlForResourceNamed("webview.html").path()),a.setFrameLoadDelegate_(l.getClassInstance()),a},createDivider:function(e){var t=NSView.alloc().initWithFrame(e);return t.setWantsLayer(1),t.layer().setBackgroundColor(CGColorCreateGenericRGB(.8,.8,.8,1)),t},runFramework:function(e){var t=Mocha.sharedRuntime(),r="SketchIconsFramework",a=e.scriptPath.stringByDeletingLastPathComponent();return!!t.valueForKey(r)||(t.loadFrameworkWithName_inDirectory(r,a)?(t.setValue_forKey_(!0,r),!0):(log("❌ loadFramework: `"+r+"` failed!: "+a+". Please define SketchIcons_FrameworkPath if you're trying to @import in a custom plugin"),!1))},getImageByColor:o,isArtboardMasked:function(e){var t=e.layers();if(t.length>1&&t[1].isMasked())return!0}}},function(e,t,r){function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){var a=r.mask?r.mask:null;r.color?a=function(e,t,r,a){n.default.clearSelection(e);var i=AppController.sharedInstance().librariesController();return(a?i.importForeignSymbol_fromLibrary_intoDocument(r,a,e.document.documentData()).symbolMaster():r).newSymbolInstance()}(e,0,r.color,r.colorLib):r.colorPicker&&(a=function(e,t,r){var a=t.rect(),i=MSShapeGroup.shapeWithRect({origin:{x:0,y:0},size:{width:a.size.width,height:a.size.height}});return i.style().addStylePartOfType(0).color=r,i}(0,t,r.colorPicker)),o(t,a)}function o(e,t){var r=e.rect();t.setHeightRespectingProportions(r.size.height),t.setWidthRespectingProportions(r.size.width),t.setName("🎨 color"),e.addLayer(t),MSMaskWithShape.toggleMaskForSingleShape(e.layers()[0])}Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(1));a(r(0)),a(r(3));t.default={initAddMaskOnSelectedArtboards:function(e,t,r){r.some(function(r){n.default.isArtboardMasked(r.object)&&(MSMaskWithShape.toggleMaskForSingleShape(r.object.layers()[0]),r.object.layers()[1].removeFromParent()),i(e,r.object,t)}),n.default.clearSelection(e)},addMask:i,applyMask:o}},function(e,t,r){function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){t.removeAllItems();var r=e.representedObject();return r.loadSynchronously(),s(r.document())}function o(e,t,r){var a=[];(a="Current file"===String(t.title())?s(e.document.documentData()):i(t,r)).length>0?(n(r,a),(0,c.setEnabledColorMenu)(!0)):(0,c.setEnabledColorMenu)(!1)}function n(e,t){var r=NSMenu.alloc().init();return r.cancelTracking(),t.forEach(function(e){var t=NSMenuItem.alloc().init();t.title=e.symbol?e.symbol.name():"";var a=e.color?NSColor.colorWithRed_green_blue_alpha(e.color.red(),e.color.green(),e.color.blue(),e.color.alpha()):NSColor.colorWithRed_green_blue_alpha(e.red(),e.green(),e.blue(),e.alpha());t.representedObject=e.symbol?e.symbol:a,t.image=l.default.getImageByColor(a),r.addItem(t)}),e.menu=r,e}function s(e){var t=[],r=void 0;return e.localSymbols().some(function(e){r=e.layers(),e.children().length>3||(0===r.length&&e.backgroundColor()?t.push({color:e.backgroundColor(),symbol:e}):1===r.length&&r[0].style().hasEnabledFill()&&t.push({color:r[0].style().fills()[0].color(),symbol:e}))}),t}Object.defineProperty(t,"__esModule",{value:!0});a(r(0));var l=a(r(1)),c=r(5);t.default={getLibs:function(){return AppController.sharedInstance().librariesController().userLibraries().slice().map(function(e){return e})},getLibById:function(e){return AppController.sharedInstance().librariesController().userLibraries().slice().filter(function(t){return String(e)===String(t.libraryID())})[0]},loadColorFromSelectedLib:i,initLibsSelectList:function(e,t,r){function a(t){t.setCOSJSTargetFunction(function(t){o(e,t,r)})}var i=NSMenu.alloc().init(),n=NSMenuItem.alloc().init();return n.title="Current file",a(n),i.addItem(n),t.some(function(e){var t=NSMenuItem.alloc().init();t.title=e.name(),t.representedObject=e,i.addItem(t),a(t)}),o(e,n,r),i},initColorSelectList:n}},function(e,t,r){function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){t%10==0?(d.position.y+=2*d.size.width,d.position.x=d.size.width):d.position.x+=2*d.size.width;var a=MSArtboardGroup.new();a.setName(n.default.getIconNameByNSUrl(r));var i=a.frame();return i.setWidth(d.size.width),i.setHeight(d.size.height),i.setX(d.position.x),i.setY(d.position.y),e.document.currentPage().addLayers([a]),a}function o(e){var t=e.api().selectedDocument.selectedPage;if(1===t.sketchObject.children().length)d.position.x=d.position.y=2*d.size.width;else{var r=[];t.sketchObject.layers().some(function(e){r.push(e.origin().y)}),d.position.x=2*d.size.width,d.position.y=Math.max.apply(Math,r)}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(1)),s=a(r(0)),l=a(r(2)),c=a(r(6));t.default={createArtboard:i,initArtboardsParams:o,initImportIcons:function(e,t){n.default.clearSelection(e),d.size.height=d.size.width=t.artboardSize,o(e),t.listIcon.some(function(r,a){try{var o=i(e,a,r);c.default.addSVG(e,o,t.iconPadding,t.artboardSize,r),t.withMask&&l.default.addMask(e,o,t),t.convertSymbol&&MSSymbolMaster.convertArtboardToSymbol(o)}catch(e){s.default.error(e)}}),e.document.showMessage("🎉 Tadaaa! 🎉 "+String(t.listIcon.length)+" icon"+(t.listIcon.length>1?"s":"")+" imported"),n.default.clearSelection(e)},getPaddingAndSize:function(e){var t=e.layers()[0].rect();return{iconPadding:parseInt(Math.min(t.origin.x,t.origin.y)),artboardSize:parseInt(e.rect().size.width)}}};var d={position:{x:0,y:0},size:{height:0,width:0}}},function(e,t,r){function a(e){return e&&e.__esModule?e:{default:e}}function i(){this.modal=COSAlertWindow.new(),this.view=NSView.alloc().initWithFrame(NSMakeRect(0,0,this.modalParams.width,this.modalParams.height)),this.modal.addAccessoryView(this.view),this.modal.setMessageText(this.modalParams.messageText),this.modal.setInformativeText(this.modalParams.informativeText),this.modal.addButtonWithTitle("Continue"),this.modal.addButtonWithTitle("Cancel")}function o(){this.coeffCurrentHeight++,this.coeffCurrentHeight++;var e=f.default.createLabel("Color Source",0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight+40,150,20);this.view.addSubview(e);var t=NSButtonCell.alloc().init();t.setButtonType(NSRadioButton);var r=NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,300,60),NSRadioModeMatrix,t,2,1);r.setCellSize(CGSizeMake(300,25));var a=r.cells();a[0].setTitle("From Symbols"),a[0].setFont(NSFont.systemFontOfSize_(13)),a[1].setTitle("From Color picker"),a[1].setFont(NSFont.systemFontOfSize_(13)),this.view.addSubview(r),function(e){function t(e){"From Symbols"===String(e.selectedCells()[0].title())?(u(),h(),this.isLibrarySource=!0):(!function(){this.colorLibsMenuParams.removeFromSuperview(),this.colorsMenuParams.removeFromSuperview(),this.colorLibsMenuParamsLabel.removeFromSuperview(),this.colorsMenuParamsLabel.removeFromSuperview()}(),function(){this.view.addSubview(this.pickerView),this.view.addSubview(this.colorPickerLabel)}(),this.isLibrarySource=!1)}e[0].setCOSJSTargetFunction(t),e[1].setCOSJSTargetFunction(t)}(a),this.radioParams=r,this.radioButtonLabel=e}function n(e){this.coeffCurrentHeight++;var t=f.default.createLabel("Document Source",0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,150,25);this.view.addSubview(t);var r=NSPopUpButton.alloc().initWithFrame(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,130,30));this.coeffCurrentHeight++;var a=f.default.createLabel("Color",0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,150,25);this.view.addSubview(a);var i=NSPopUpButton.alloc().initWithFrame(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,130,30));this.view.addSubview(r),this.view.addSubview(i),this.colorLibsMenuParams=r,this.colorsMenuParams=i,this.colorLibsMenuParamsLabel=t,this.colorsMenuParamsLabel=a,r.menu=g.default.initLibsSelectList(e,g.default.getLibs(),i)}function s(e){var t=this,r=f.default.createLabel("Color picker",0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight+20,150,20),a=NSView.alloc().initWithFrame(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,130,60));a.setWantsLayer(!0),a.layer().setBackgroundColor(CGColorCreateGenericRGB(1,1,1,1)),a.layer().setBorderColor(CGColorCreateGenericRGB(186/255,186/255,186/255,1)),a.layer().borderWidth=1;var i=f.default.createLabel("#000000",60,20,100,20);a.addSubview(i);var o=NSButton.alloc().initWithFrame(NSMakeRect(5,15,50,30));o.setButtonType(NSMomentaryChangeButton),o.setImage(f.default.getImageByColor(NSColor.colorWithRed_green_blue_alpha(0,0,0,1),{width:40,height:30})),o.setBordered(!1);var n=AMOMain.alloc().init();o.setCOSJSTargetFunction(function(){n.openPopover_onView_withWebview(o,t.view,f.default.createWebview(e,o,function(e){t.colorPickerColor=e,i.setStringValue_("#"+String(e.immutableModelObject().hexValue()))}))}),a.addSubview(o),this.pickerView=a,this.colorPickerLabel=r}function l(e){var t=e?NSColor.controlTextColor():S;this.colorLibsMenuParamsLabel.setTextColor(t),this.colorLibsMenuParams.setEnabled(e)}function c(e){this.colorsMenuParamsLabel.setTextColor(m(e)),this.colorsMenuParams.setEnabled(e)}function d(e){this.radioParams.setEnabled(e),this.radioButtonLabel.setTextColor(m(e))}function u(){this.view.addSubview(this.colorLibsMenuParams),this.view.addSubview(this.colorsMenuParams),this.view.addSubview(this.colorLibsMenuParamsLabel),this.view.addSubview(this.colorsMenuParamsLabel)}function h(){this.pickerView.removeFromSuperview(),this.colorPickerLabel.removeFromSuperview()}function m(e){return color=e?NSColor.controlTextColor():S,color}Object.defineProperty(t,"__esModule",{value:!0}),t.maskModal=t.importModal=t.setEnabledColorMenu=void 0;var f=a(r(1)),g=(a(r(0)),a(r(3))),S=NSColor.colorWithCalibratedRed_green_blue_alpha(170/255,170/255,170/255,1);t.setEnabledColorMenu=c,t.importModal=function(e){this.modalParams={messageText:"Configure your import",informativeText:"Your icons will be arranged in artboards. Set size and padding of your artboards.",height:300,width:300,lineHeight:35},this.coeffCurrentHeight=0,this.isLibrarySource=!0,this.adjustHeight=0,i(this.modalParams),function(){this.coeffCurrentHeight++;var e=f.default.createLabel("Artboard size",0,this.modalParams.height-this.modalParams.lineHeight,150,20);this.view.addSubview(e);var t=NSTextField.alloc().initWithFrame(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight,50,20));t.setStringValue("24"),this.view.addSubview(t);var r=f.default.createLabel("px",205,this.modalParams.height-this.modalParams.lineHeight,50,20);this.view.addSubview(r),this.coeffCurrentHeight++;var a=f.default.createLabel("Artboard Padding",0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight,150,20);this.view.addSubview(a);var i=NSTextField.alloc().initWithFrame(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight,50,20));i.setStringValue("3"),this.view.addSubview(i);var o=f.default.createLabel("px",205,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight,50,20);this.view.addSubview(o),this.artboardPadding=i,this.artboardSize=t,this.artboardSize.setNextKeyView(this.artboardPadding)}(),this.view.addSubview(f.default.createDivider(NSMakeRect(0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-10,this.modalParams.width,1))),this.adjustHeight=5,function(){this.coeffCurrentHeight++;var e=f.default.createLabel("Symbols",0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,150,20);this.view.addSubview(e);var t=NSButton.alloc().initWithFrame(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,200,20));t.setButtonType(NSSwitchButton),t.setState(!0),t.setFont(NSFont.systemFontOfSize_(13)),t.setTitle("Convert to symbol"),this.view.addSubview(t),this.symbolParams=t}(),this.view.addSubview(f.default.createDivider(NSMakeRect(0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-15,this.modalParams.width,1))),this.adjustHeight=8,function(){this.coeffCurrentHeight++;var e=f.default.createLabel("Mask",0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,150,20);this.view.addSubview(e);var t=NSButton.alloc().initWithFrame(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,200,20));t.setButtonType(NSSwitchButton),t.setState(!1),t.setFont(NSFont.systemFontOfSize_(13)),t.setTitle("Add color mask"),this.view.addSubview(t),this.checkboxMaskParams=t}(),o(),n(e),l(!1),c(!1),d(!1),s(e),function(){var e=this;this.checkboxMaskParams.setCOSJSTargetFunction(function(t){t.state()?(d(!0),l(!0),e.colorsMenuParams.numberOfItems()>0&&c(!0)):(d(!1),l(!1),c(!1),u(),h(),e.radioParams.cells()[0].state=!0,e.radioParams.cells()[1].state=!1)})}();var t={button:this.modal.runModal(),artboardSize:parseInt(this.artboardSize.stringValue()),iconPadding:parseInt(this.artboardPadding.stringValue()),convertSymbol:this.symbolParams.state(),withMask:this.checkboxMaskParams.state()};if(t.withMask&&this.isLibrarySource){var r=this.colorsMenuParams.selectedItem();t.color=r?this.colorsMenuParams.representedObject():null;var a=this.colorLibsMenuParams.selectedItem();t.colorLib=a?this.colorLibsMenuParams.representedObject():null}else t.withMask&&(t.colorPicker=this.colorPickerColor);return t},t.maskModal=function(e){this.modalParams={messageText:"Configure your color mask",informativeText:"Select your library and choose a color to apply as mask. Your layers will all be combined.",height:160,width:300,lineHeight:35},this.coeffCurrentHeight=0,this.isLibrarySource=!0,this.adjustHeight=0,i(this.modalParams),o(),n(e),s(e);var t={button:this.modal.runModal()};if(this.isLibrarySource){var r=this.colorsMenuParams.selectedItem();t.color=r?this.colorsMenuParams.representedObject():null;var a=this.colorLibsMenuParams.selectedItem();t.colorLib=a?this.colorLibsMenuParams.representedObject():null}else t.colorPicker=this.colorPickerColor;return t}},function(e,t,r){function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,a,i){c.default.clearSelection(e);var s=MSSVGImporter.svgImporter();s.prepareToImportFromData(function(e,t,r){var a=NSString.alloc().initWithContentsOfURL(e),i=r-2*t,o="<rect width="+i+" height="+i+' id="delete-me"/></svg>';return(a=NSString.stringWithString(a.replace("</svg>",o))).dataUsingEncoding(NSUTF8StringEncoding)}(i,r,a));var l=s.importAsLayer();n(l),t.addLayer(l);o(l.frame(),t,r),function(e){var t=MSShapeGroup.shapeWithRect(null);t.setName("container-random-string-9246392"),e.addLayer(t),e.children().some(function(e){var r=String(e.class());"MSLayerGroup"===r||"MSRectangleShape"===r&&"container-random-string-9246392"===String(e.name())?e.removeFromParent():r.includes("Shape")&&"MSShapeGroup"!==r&&e.moveToLayer_beforeLayer(t,e)});t.style().addStylePartOfType(0).color=MSColor.blackColor(),t.setName("icon"),t.resizeToFitChildrenWithOption(0)}(t),function(e,t){var r=t.width(),a=t.height();t.setX((e-r)/2),t.setY((e-a)/2)}(a,t.layers()[0].frame())}function o(e,t,r){var a=t.rect(),i=parseInt(a.size.width),o=parseInt(a.size.height);e.setWidth(i-2*r),e.setHeight(o-2*r)}function n(e){for(var t=e.children(),r=NSPredicate.predicateWithFormat("(className == %@)","MSTextLayer"),a=NSPredicate.predicateWithFormat("(name == %@)","delete-me"),i=t.filteredArrayUsingPredicate(r).arrayByAddingObjectsFromArray(t.filteredArrayUsingPredicate(a)).objectEnumerator(),o=void 0;o=i.nextObject();)o.removeFromParent()}Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(2)),l=a(r(4)),c=a(r(1));a(r(0));t.default={initUpdateIconsSelectedArtboards:function(e,t,r){t.some(function(t,a){var o=t.object.layers(),n=c.default.isArtboardMasked(t.object),d=Object.assign(l.default.getPaddingAndSize(t.object),{iconPath:r[a]});o[0].removeFromParent(),n&&(d.mask=o[0].copy(),o[0].removeFromParent()),i(e,t.object,d.iconPadding,d.artboardSize,d.iconPath),n&&s.default.applyMask(t.object,d.mask),t.object.setName(c.default.getIconNameByNSUrl(d.iconPath))}),c.default.clearSelection(e)},addSVG:i,resizeSVG:o,removeTxt:n}},function(e,t,r){function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.importIcons=function(e){i.default.runFramework(e);var t=(0,d.importModal)(e);1e3===t.button&&(t.listIcon=l.default.selectIconsFiles(),t.listIcon.length&&o.default.initImportIcons(e,t))},t.updateIconsOnSelectedArtboards=function(e){var t=i.default.getSelectedArtboardsAndSymbols(e);if(0===t.length)return s.default.newErrorModal("No artboards selected","Please select one or more artboards to replace icons.");var r=l.default.selectIconsFiles();if(r.length)return t.length>r.length?s.default.newErrorModal("Too much artboards selected","Please select as many artboards as icons."):t.length<r.length?s.default.newErrorModal("Too much icons selected","Please select as many icons as artboards."):void c.default.initUpdateIconsSelectedArtboards(e,t,r)},t.addMaskOnSelectedArtboards=function(e){i.default.runFramework(e);var t=i.default.getSelectedArtboardsAndSymbols(e);if(0===t.length)return s.default.newErrorModal("No artboards selected","Please select one or more artboards to add a mask.");var r=(0,d.maskModal)(e);1e3===r.button&&n.default.initAddMaskOnSelectedArtboards(e,r,t)},t.updateMaskOnSelectedArtboards=function(e){i.default.runFramework(e);var t=i.default.getSelectedArtboardsAndSymbols(e);if(0===t.length)return s.default.newErrorModal("No artboards selected","Please select one or more artboards to add a mask.");var r=(0,d.maskModal)(e);1e3===r.button&&n.default.initAddMaskOnSelectedArtboards(e,r,t)};a(r(0));var i=a(r(1)),o=a(r(4)),n=a(r(2)),s=a(r(9)),l=a(r(10)),c=a(r(6)),d=r(5)},function(module,exports){function MochaJSDelegate(selectorHandlerDict){var uniqueClassName="MochaJSDelegate_DynamicClass_"+NSUUID.UUID().UUIDString(),delegateClassDesc=MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName,NSObject);delegateClassDesc.registerClass();var handlers={};if(this.setHandlerForSelector=function(selectorString,func){var handlerHasBeenSet=selectorString in handlers,selector=NSSelectorFromString(selectorString);if(handlers[selectorString]=func,!handlerHasBeenSet){for(var dynamicHandler=function(){var e=handlers[selectorString];if(e)return e.apply(delegateClassDesc,arguments)},args=[],regex=/:/g;match=regex.exec(selectorString);)args.push("arg"+args.length);dynamicFunction=eval("(function("+args.join(",")+"){ return dynamicHandler.apply(this, arguments); })"),delegateClassDesc.addInstanceMethodWithSelector_function_(selector,dynamicFunction)}},this.removeHandlerForSelector=function(e){delete handlers[e]},this.getHandlerForSelector=function(e){return handlers[e]},this.getAllHandlers=function(){return handlers},this.getClass=function(){return NSClassFromString(uniqueClassName)},this.getClassInstance=function(){return NSClassFromString(uniqueClassName).new()},"object"==(void 0===selectorHandlerDict?"undefined":_typeof(selectorHandlerDict)))for(var selectorString in selectorHandlerDict)this.setHandlerForSelector(selectorString,selectorHandlerDict[selectorString])}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.default=MochaJSDelegate},function(e,t,r){function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3)),o=a(r(1));a(r(0));t.default={newModal:function(e,t,r){var a=COSAlertWindow.new(),i=NSView.alloc().initWithFrame(NSMakeRect(0,0,t.width,t.height));return a.addAccessoryView(i),a.setMessageText(r.messageText),a.setInformativeText(r.informativeText),a.addButtonWithTitle("Continue"),a.addButtonWithTitle("Cancel"),a.layout(),{modal:a,view:i,viewSize:t}},runModal:function(e){return e.modal.runModal()},getMainButtonParam:function(e){return{button:e}},createArtboardFields:function(){var e=NSTextField.alloc().initWithFrame(NSMakeRect(0,10,130,20));e.setStringValue("24");var t=NSTextField.alloc().initWithFrame(NSMakeRect(140,10,130,20));return t.setStringValue("3"),[{item:e,getter:function(){return parseInt(e.stringValue())},name:"artboardSize",label:o.default.createLabel("Size",0,30,130,20)},{item:t,getter:function(){return parseInt(t.stringValue())},name:"iconPadding",label:o.default.createLabel("Padding",140,30,130,20)}]},createCheckBoxes:function(){var e=NSButton.alloc().initWithFrame(NSMakeRect(0,30,200,14));e.setButtonType(NSSwitchButton),e.setState(!0),e.setFont(NSFont.systemFontOfSize_(13)),e.setTitle("Convert to symbol");var t=NSButton.alloc().initWithFrame(NSMakeRect(0,5,200,14));return t.setButtonType(NSSwitchButton),t.setState(!1),t.setFont(NSFont.systemFontOfSize_(13)),t.setTitle("Add color mask"),[{item:e,name:"convertSymbol",getter:e.state},{item:t,name:"withMask",getter:t.state}]},createMaskFields:function(e,t,r){var a=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,0,130,20)),n=NSPopUpButton.alloc().initWithFrame(NSMakeRect(140,0,130,20));return a.setEnabled(!1),n.setEnabled(!1),a.menu=i.default.initLibsSelectList(i.default.getLibs(),n),r?r[1].item.setCOSJSTargetFunction(function(e){e.state()?(a.setEnabled(!0),n.selectedItem()&&n.setEnabled(!0)):(a.setEnabled(!1),n.setEnabled(!1))}):a.setEnabled(!0),[{item:n,label:o.default.createLabel("Color",140,25,130,20),name:"color",getter:function(){var e=this.item.selectedItem();return e?e.representedObject():null}},{item:a,label:o.default.createLabel("Colors Library",0,25,130,20),name:"colorLib",getter:function(){var e=this.item.selectedItem();return e?e.representedObject():null}}]},appendsFields:function(e,t,r){var a=e.view,i=e.viewSize;t.reverse().forEach(function(e){var t=r?50*a.subviews().length+25:50*a.subviews().length,o=NSView.alloc().initWithFrame(NSMakeRect(0,t,i.width,50));e.forEach(function(e){e.label&&o.addSubview(e.label),e.item&&o.addSubview(e.item)}),a.addSubview(o)})},getParams:function(e){var t={};return e.forEach(function(e){e.forEach(function(e){t[e.name]=e.getter()})}),t},setNextKey:function(e){e.forEach(function(t,r){e[r+1]&&t.item&&t.item.setNextKeyView(e[r+1].item)})},newErrorModal:function(e,t){var r=COSAlertWindow.new();r.setMessageText(e),r.setInformativeText(t),r.runModal()}}},function(e,t,r){function a(e){var t;return(t=[]).concat.apply(t,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e.slice().map(function(e){return"svg"===e.toString().split(".").pop()?e:NSFileManager.defaultManager().contentsOfDirectoryAtURL_includingPropertiesForKeys_options_error(e,null,null,null).slice().filter(function(e){if("svg"===e.toString().split(".").pop())return!0})})))}Object.defineProperty(t,"__esModule",{value:!0});!function(e){e&&e.__esModule}(r(0));t.default={selectIconsFiles:function(){var e=NSOpenPanel.openPanel();return e.setAllowsMultipleSelection(!0),e.setCanChooseDirectories(!0),e.setAllowedFileTypes(["svg"]),e.setCanChooseFiles(!0),e.setPrompt("Select"),e.runModal()!==NSFileHandlingPanelOKButton?[]:a(e.URLs())},getFilesByUrls:a}}]);"default"===key&&"function"==typeof exports?exports(context):exports[key](context)}var that=this;that.importIcons=__skpm_run.bind(this,"importIcons"),that.onRun=__skpm_run.bind(this,"default"),that.updateIconsOnSelectedArtboards=__skpm_run.bind(this,"updateIconsOnSelectedArtboards"),that.addMaskOnSelectedArtboards=__skpm_run.bind(this,"addMaskOnSelectedArtboards"),that.updateMaskOnSelectedArtboards=__skpm_run.bind(this,"updateMaskOnSelectedArtboards");