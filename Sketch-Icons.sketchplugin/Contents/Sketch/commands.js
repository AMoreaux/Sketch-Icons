var that=this;function __skpm_run(key,context){that.context=context;var exports=function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=12)}([function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=s(r(13)),o=s(r(1)),n=s(r(2));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:14,height:14},r=CGSizeMake(t.width,t.height),i=NSImage.alloc().init();i.size=r,i.lockFocus();var a=MSBackgroundColorView.alloc().init();return a.backgroundColor=e,a.drawRect(NSMakeRect(0,0,t.width,t.height)),i.unlockFocus(),i}t.default={clearSelection:function(e){e.api().selectedDocument.selectedLayers.clear()},getIconNameByNSUrl:function(e){return e.lastPathComponent().split(".")[0]},createLabel:function(e,t,r,i,a,o){var n=NSTextField.alloc().initWithFrame_(NSMakeRect(t,r,i,a));o&&n.setTextColor(NSColor.colorWithCalibratedRed_green_blue_alpha(0,0,0,.6));return n.setEditable_(!1),n.setSelectable_(!1),n.setBezeled_(!1),n.setDrawsBackground_(!1),n.setFont(NSFont.systemFontOfSize(o?11:13)),n.setStringValue_(e),n},getSelectedArtboardsAndSymbols:function(e){var t=[];return e.selection.forEach(function(e){var r=String(e.class());"MSArtboardGroup"===r&&"MSSymbolMaster"===r||(e=e.parentRoot(),r=String(e.class())),-1!==t.indexOf(String(e.objectID()))||"MSArtboardGroup"!==r&&"MSSymbolMaster"!==r||t.push({object:e,type:r,id:e.objectID()})}),t=t.filter(function(e,t,r){return t===r.findIndex(function(t){return t.id===e.id})})},createWebview:function(e,t,r){var i=WebView.alloc().initWithFrame(NSMakeRect(0,0,220,300)),n=i.windowScriptObject(),s=new a.default({"webView:didFinishLoadForFrame:":function(){return function(e,t){o.default.log("loaded")}}(),"webView:didChangeLocationWithinPageForFrame:":function(){return function(e,i){var a=n.evaluateWebScript("window.location.hash"),o=JSON.parse(decodeURIComponent(a).split("color=")[1]);o.r=parseInt(o.r)/255,o.g=parseInt(o.g)/255,o.b=parseInt(o.b)/255,o.a=parseFloat(o.a);var s=NSColor.colorWithRed_green_blue_alpha(o.r,o.g,o.b,o.a),c=MSImmutableColor.colorWithNSColor(s);t.setImage(l(s,{width:40,height:30})),r(c)}}()});return i.setDrawsBackground(!1),i.setMainFrameURL_(e.plugin.urlForResourceNamed("webview.html").path()),i.setFrameLoadDelegate_(s.getClassInstance()),i},createDivider:function(e){var t=NSView.alloc().initWithFrame(e);return t.setWantsLayer(1),t.layer().setBackgroundColor(CGColorCreateGenericRGB(.8,.8,.8,1)),t},runFramework:function(e){var t=Mocha.sharedRuntime(),r=e.scriptPath.stringByDeletingLastPathComponent();return!!t.valueForKey("SketchIconsFramework")||(t.loadFrameworkWithName_inDirectory("SketchIconsFramework",r)?(t.setValue_forKey_(!0,"SketchIconsFramework"),!0):(log("‚ùå loadFramework: `SketchIconsFramework` failed!: "+r+". Please define SketchIcons_FrameworkPath if you're trying to @import in a custom plugin"),!1))},getImageByColor:l,hasMask:function(e){return!!e.firstLayer().hasClippingMask()},layerToSvg:function(e){var t=SketchSVGExporter.alloc().init().exportLayers([e.immutableModelObject()]);return NSString.alloc().initWithData_encoding(t,NSUTF8StringEncoding)},svgHasStroke:function(e){var t=!1;return e.children().forEach(function(e){e.styledLayer().style().hasEnabledBorder()&&(t=!0)}),t},convertMSColorToString:function(e){return JSON.stringify({r:e.red(),g:e.green(),b:e.blue(),a:e.alpha()})},convertStringToMSColor:function(e){var t="object"!==(void 0===e?"undefined":i(e))?e:JSON.parse(e),r=NSColor.colorWithRed_green_blue_alpha(t.r,t.g,t.b,t.a);return MSImmutableColor.colorWithNSColor(r)},getBorderColor:function(e){for(var t=void 0,r=e.children(),i=0;i<r.length;i++){var a=r[i].styledLayer().style();if(t=a.firstEnabledBorder())break}return t},getRootObject:function(e){var t=[];return e.api().selectedDocument.selectedPage.sketchObject.layers().forEach(function(e){var r=String(e.class());"MSArtboardGroup"!==r&&"MSSymbolMaster"!==r||t.push(e)}),t},getSizeBetweenIcon:function(e,t){var r=parseInt(t),i=t.replace(r,"");return i&&"%"===i?e+e*(r/100):e+r},buildPrefix:function(e,t){var r=n.default.getSettings(e,"default");return"null"!==r.prefixRootObject.data?r.prefixRootObject.data.replace("$size",t):""}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{log:function(e){log(e)},debug:function(e){log("DEBUG: "+e)},info:function(e){log("INFO: "+e)},warn:function(e){log("WARN: "+e)},error:function(e){log("ERROR: "+e)}}}()},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={registerSettings:function(e,t){r.forEach(function(r){NSUserDefaults.standardUserDefaults().setObject_forKey(t[r.name],r.name),e.command.setValue_forKey_onDocument(t[r.name],r.name,e.document.documentData())})},getSettings:function(e,t){var a={};return r.forEach(function(e){a[e.name]={value:NSUserDefaults.standardUserDefaults().objectForKey(e.name),default:e.default,placeholder:e.placeholder},i(a[e.name])?a[e.name].data=String(a[e.name].value):a[e.name].data=String(a[e.name][t])}),a},resetSettings:function(e){r.forEach(function(t){e.command.setValue_forKey_onDocument(null,t.name,e.document.documentData())})},hasValue:i};var r=[{name:"presets",default:"",placeholder:"24-4, 48-8..."},{name:"convertStroke",default:"0",placeholder:"0"},{name:"iconsByLine",default:"10",placeholder:"10"},{name:"marginBetweenRootObject",default:"100%",placeholder:"100%"},{name:"prefixRootObject",default:"",placeholder:"icons/$size/..."}];function i(e){return!(!e.value||"null"===String(e.value)||0===String(e.value).length)}},function(e,t,r){(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=s(r(0)),a=s(r(4)),o=s(r(5)),n=(s(r(1)),s(r(21)));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r){if("MSBitMapLayer"!==String(t.firstLayer().class()))return i.default.svgHasStroke(t)?c(t,r):(i.default.hasMask(t)&&u(e,t),a.default.cleanSvg(t),function(e,t,r){var a=void 0;r.color?a=function(e,t,r){i.default.clearSelection(e);var a=AppController.sharedInstance().librariesController();return(r?a.importForeignSymbol_fromLibrary_intoDocument(t,r,e.document.documentData()).symbolMaster():t).newSymbolInstance()}(e,r.color,r.colorLib):r.colorPicker&&(a=function(e,t,r){var i=t.rect(),a=MSShapeGroup.shapeWithRect({origin:{x:0,y:0},size:{width:i.size.width,height:i.size.height}});return a.style().addStylePartOfType(0).color=r,a}(0,t,r.colorPicker));var o=t.rect();a.setHeightRespectingProportions(o.size.height),a.setWidthRespectingProportions(o.size.width),a.setName("üé® color"),t.firstLayer().style().disableAllFills(),t.addLayers([a]);var n=t.firstLayer();n.hasClippingMask=!0,n.clippingMaskMode=0}(e,t,r)),d(e,t,r)}function c(e,t){var r=t.colorPicker?t.colorPicker:o.default.getColorFromSymbol(t.color).color;e.children().forEach(function(e){e.styledLayer().style().hasEnabledBorder()&&e.styledLayer().style().enabledBorders().forEach(function(e){e.color=r})})}function u(e,t){if(e.command.setValue_forKey_onLayer(null,"colorLib",t),e.command.setValue_forKey_onLayer(null,"color",t),e.command.setValue_forKey_onLayer(null,"colorPicker",t),i.default.svgHasStroke(t))return c(t,{colorPicker:MSImmutableColor.blackColor()});var r=t.firstLayer();if(r.hasClippingMask()){r.hasClippingMask=!1,r.clippingMaskMode=1;var a=t.firstLayer().style(),o=a.fills()[0].color();a.removeAllStyleFills(),a.addStylePartOfType(0).color=o,t.lastLayer().removeFromParent()}}function d(e,t,r){if(r.color){var a=r.colorLib?r.colorLib.libraryID():null,o="string"==typeof r.color?r.color:r.color.symbolID();e.command.setValue_forKey_onLayer(a,"colorLib",t),e.command.setValue_forKey_onLayer(o,"color",t),e.command.setValue_forKey_onLayer(null,"colorPicker",t)}else r.colorPicker&&(e.command.setValue_forKey_onLayer(i.default.convertMSColorToString(r.colorPicker),"colorPicker",t),e.command.setValue_forKey_onLayer(null,"colorLib",t),e.command.setValue_forKey_onLayer(null,"color",t))}function h(e,t){return{colorLibraryId:e.command.valueForKey_onLayer("colorLib",t),colorSymbolId:e.command.valueForKey_onLayer("color",t),colorString:e.command.valueForKey_onLayer("colorPicker",t)}}t.default={initAddMaskOnSelectedArtboards:function(t,r,a){a.forEach(async function(a){try{i.default.hasMask(a.object)&&!i.default.svgHasStroke(a.object)&&u(t,a.object),await l(t,a.object,r)}catch(t){e.log(">>>>>>>>>>>",t)}}),i.default.clearSelection(t)},addColor:l,removeMask:u,getMaskPropertiesFromArtboard:function(e,t){var r=h(e,t),a=t.firstLayer();r.colorLibraryId||r.colorSymbolId||r.colorString||!a||!a.hasClippingMask()||(n.default.switchToV4(e,t),r=h(e,t));!r.colorLibraryId&&r.colorSymbolId?r.colorSymbol=o.default.getSymbolFromDocument(e.document.documentData(),r.colorSymbolId):r.colorLibraryId&&(r.colorLibrary=o.default.getLibById(r.colorLibraryId),o.default.loadLibrary(r.colorLibrary),r.colorSymbol=o.default.getSymbolFromDocument(r.colorLibrary.document(),r.colorSymbolId));r.colorPicker=r.colorString?i.default.convertStringToMSColor(r.colorString):null;var s={colorLib:r.colorLibraryId?r.colorLibrary:null,color:r.colorSymbolId?r.colorSymbol:null,colorPicker:r.colorPicker};return s.colorLib||s.color||s.colorPicker?s:{}},registerMask:d}}).call(t,r(8))},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=s(r(3)),a=s(r(7)),o=s(r(2)),n=s(r(0));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r,i,a){var s,l=o.default.getSettings(e,"default");s=function(e){var t=e.match(/viewBox="(.*?)"/gm),r=void 0,i=void 0;Array.isArray(t)&&(r=t[0].match(/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g),i={width:parseFloat(r[2]),height:parseFloat(r[3])});return i}(i=NSString.stringWithString(i)),a&&(i=function(e,t){var r='<rect width="'+String(t.width)+'" height="'+String(t.height)+'" id="delete-me"/></svg>';return NSString.stringWithString(e.replace("</svg>",r))}(i,s));var d=MSSVGImporter.svgImporter();d.prepareToImportFromData(i.dataUsingEncoding(NSUTF8StringEncoding));var h=d.importAsLayer();!function(e){var t=e.children(),r=NSPredicate.predicateWithFormat("(className == %@)","MSTextLayer"),i=t.filteredArrayUsingPredicate(r).objectEnumerator(),a=void 0;for(;a=i.nextObject();)a.removeFromParent()}(h),t.addLayer(h),function(e){var t=[];e.firstLayer().children().forEach(function(e){var r=e.styledLayer().style();r.hasEnabledFill()&&0===r.contextSettings().opacity()&&t.push(e)}),t.forEach(function(e){e.removeFromParent()})}(t),n.default.svgHasStroke(t)&&"1"===l.convertStroke.data&&function(e){e.children().forEach(function(e){e.canConvertToOutlines()&&"delete-me"!==String(e.name())&&e.layersByConvertingToOutlines()}),e.children().forEach(function(e){e.styledLayer().style().disableAllBorders()})}(t),a&&u(t,r.iconPadding),a&&function(e){var t=e.children(),r=NSPredicate.predicateWithFormat("(name == %@)","delete-me"),i=t.filteredArrayUsingPredicate(r);if(!i.length)return e.firstLayer().lastLayer().removeFromParent();var a=i.objectEnumerator(),o=void 0;for(;o=a.nextObject();)o.removeFromParent()}(t),c(r.artboardSize,t.firstLayer())}function c(e,t){var r=t.frame().width(),i=t.frame().height();t.frame().setX((e-r)/2),t.frame().setY((e-i)/2)}function u(e,t){var r=e.firstLayer().frame(),i=e.rect(),a=parseInt(i.size.width),o=parseInt(i.size.height),n=r.width(),s=r.height();r.constrainProportions=!0,n>=s?r.setWidth(a-2*t):r.setHeight(o-2*t)}t.default={initUpdateIconsSelectedArtboards:function(e,t,r){return t.forEach(function(t,o){var s=Object.assign({},i.default.getMaskPropertiesFromArtboard(e,t.object),a.default.getPaddingAndSize(e,t.object),r),c=1===r.listIcon.length?r.listIcon[0]:r.listIcon[o],u=String(NSString.alloc().initWithContentsOfURL(c));s.withMask=!!(s.colorLib||s.colorPicker||s.color),t.object.removeAllLayers(),l(e,t.object,s,String(u),!0),t.object.setName(n.default.getIconNameByNSUrl(c)),s.withMask&&i.default.addColor(e,t.object,s)}),n.default.clearSelection(e),t.length},addSVG:l,addPDF:function(e,t,r,i){var a=MSPDFImporter.pdfImporter();a.prepareToImportFromURL(i);var o=a.importAsLayer();t.addLayer(o),u(t,r.iconPadding),c(r.artboardSize,t.firstLayer()),t.firstLayer().setName(t.name())},addBITMAP:function(e,t,r,i){"MSBitmapLayer"===String(i.class())?MSLayerGroup.moveLayers_intoGroup([i],t):t.addLayer(MSBitmapLayer.bitmapLayerWithImageFromPath(i));u(t,r.iconPadding),c(r.artboardSize,t.firstLayer()),t.firstLayer().setName(t.name())},cleanSvg:function(e){(function(e){var t=e.children(),r=NSPredicate.predicateWithFormat("(className == %@)","MSLayerGroup"),i=t.filteredArrayUsingPredicate(r).objectEnumerator(),a=void 0;for(;a=i.nextObject();)a.ungroup()})(e),e.firstLayer().setName(e.name()),function(e){var t=NSMutableIndexSet.indexSet();e.layers().forEach(function(e,r){e.style().hasEnabledFill()||e.style().hasEnabledBorder()||t.addIndex(r)}),e.removeLayersAtIndexes(t)}(e),function e(t){var r=t.layers();if(r.length>1)for(var i=0;i<=r.length-1;i++)r[1].moveToLayer_beforeLayer(r[0],r[1]);if(t.layers().length>1)return e(t);t.children().forEach(function(e){e.booleanOperationCanBeReset()&&e.setBooleanOperation(-1)});r[0].resizeToFitChildrenWithOption(0);r[0].setName(t.name())}(e),e.firstLayer().resizeToFitChildrenWithOption(1)}}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});o(r(1));var i=o(r(0)),a=r(6);function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r){var o=[];(o=t.representedObject()?function(e,t){return t.removeAllItems(),s((e=e.representedObject()).document())}(t,r):s(e.document.documentData())).length>0?(!function(e,t){var r=NSMenu.alloc().init();r.cancelTracking(),t.forEach(function(e){var t=NSMenuItem.alloc().init();t.title=e.symbol?e.symbol.name():"";var a=e.color?NSColor.colorWithRed_green_blue_alpha(e.color.red(),e.color.green(),e.color.blue(),e.color.alpha()):NSColor.colorWithRed_green_blue_alpha(e.red(),e.green(),e.blue(),e.alpha());t.representedObject=e.symbol?e.symbol:a,t.image=i.default.getImageByColor(a),r.addItem(t)}),e.menu=r}(r,o),(0,a.setEnabledColorMenu)(!0)):(0,a.setEnabledColorMenu)(!1)}function s(e){var t=[];return e.localSymbols().forEach(function(e){var r=l(e);r&&t.push(r)}),t}function l(e){var t=e.layers(),r=void 0;return 0===t.length&&e.backgroundColor()?r={color:e.backgroundColor(),symbol:e}:1===t.length&&2===t[0].children().length&&t[0].style().hasEnabledFill()&&(r={color:t[0].style().fills()[0].color(),symbol:e}),r}t.default={getLibById:function(e){for(var t=void 0,r=AppController.sharedInstance().librariesController().availableLibraries(),i=0;i<r.length;i++)if(String(e)===String(r[i].libraryID())){t=r[i];break}return t},initLibsSelectList:function(e,t,r){function i(t){t.setCOSJSTargetFunction(function(t){n(e,t,r)})}var a=NSMenu.alloc().init(),o=NSMenuItem.alloc().init();return o.title="Current file",i(o),a.addItem(o),t.forEach(function(e){var t=NSMenuItem.alloc().init();t.title=e.name(),t.representedObject=e,a.addItem(t),i(t)}),n(e,o,r),a},getColorFromSymbol:l,getSymbolFromDocument:function(e,t){for(var r=void 0,i=e.localSymbols(),a=0;a<i.length;a++)if(String(i[a].symbolID())===String(t)){r=i[a];break}return r},loadLibrary:function(e){return e.loadSynchronously()}}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.constructBase=t.maskModal=t.importModal=t.setEnabledColorMenu=void 0;var i=n(r(0)),a=(n(r(1)),n(r(5))),o=n(r(2));function n(e){return e&&e.__esModule?e:{default:e}}var s=NSColor.colorWithCalibratedRed_green_blue_alpha(170/255,170/255,170/255,1);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Continue";this.modal=COSAlertWindow.new(),this.view=NSView.alloc().initWithFrame(NSMakeRect(0,0,this.modalParams.width,this.modalParams.height)),this.modal.addAccessoryView(this.view),this.modal.setMessageText(this.modalParams.messageText),this.modal.addButtonWithTitle(e),this.modal.setInformativeText(this.modalParams.informativeText),this.modal.addButtonWithTitle("Cancel")}function c(){this.coeffCurrentHeight++;var e=i.default.createLabel("Artboard size",0,this.modalParams.height-this.modalParams.lineHeight,150,20);this.view.addSubview(e);var t=NSTextField.alloc().initWithFrame(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight,50,20));t.setStringValue(24),this.view.addSubview(t);var r=i.default.createLabel("px",205,this.modalParams.height-this.modalParams.lineHeight,50,20);this.view.addSubview(r),this.coeffCurrentHeight++;var a=i.default.createLabel("Artboard Padding",0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight,150,20);this.view.addSubview(a);var o=NSTextField.alloc().initWithFrame(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight,50,20));o.setStringValue(4),this.view.addSubview(o);var n=i.default.createLabel("px",205,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight,50,20);this.view.addSubview(n),this.artboardPadding=o,this.artboardSize=t,this.artboardSize.setNextKeyView(this.artboardPadding)}function u(){this.coeffCurrentHeight++,this.coeffCurrentHeight++;var e=i.default.createLabel("Color Source",0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight+40,150,20);this.view.addSubview(e);var t=NSButtonCell.alloc().init();t.setButtonType(NSRadioButton);var r=NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,300,60),NSRadioModeMatrix,t,2,1);r.setCellSize(CGSizeMake(300,25));var a=r.cells();a[0].setTitle("From Symbols"),a[0].setFont(NSFont.systemFontOfSize_(13)),a[1].setTitle("From Color picker"),a[1].setFont(NSFont.systemFontOfSize_(13)),this.view.addSubview(r),function(e){function t(e){"From Symbols"===String(e.selectedCells()[0].title())?(S(),p(),this.isLibrarySource=!0):(!function(){this.colorLibsMenuParams.removeFromSuperview(),this.colorsMenuParams.removeFromSuperview(),this.colorLibsMenuParamsLabel.removeFromSuperview(),this.colorsMenuParamsLabel.removeFromSuperview()}(),function(){this.view.addSubview(this.pickerView),this.view.addSubview(this.colorPickerLabel)}(),this.isLibrarySource=!1)}e[0].setCOSJSTargetFunction(t),e[1].setCOSJSTargetFunction(t)}(a),this.radioParams=r,this.radioButtonLabel=e}function d(e){this.coeffCurrentHeight++;var t=i.default.createLabel("Document Source",0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,150,25);this.view.addSubview(t);var r=NSPopUpButton.alloc().initWithFrame(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,130,30));this.coeffCurrentHeight++;var o=i.default.createLabel("Color",0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,150,25);this.view.addSubview(o);var n=NSPopUpButton.alloc().initWithFrame(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,130,30));this.view.addSubview(r),this.view.addSubview(n),this.colorLibsMenuParams=r,this.colorsMenuParams=n,this.colorLibsMenuParamsLabel=t,this.colorsMenuParamsLabel=o,r.menu=a.default.initLibsSelectList(e,AppController.sharedInstance().librariesController().availableLibraries(),n)}function h(e){var t=this,r=i.default.createLabel("Color picker",0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight+20,150,20),a=NSView.alloc().initWithFrame(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,130,60));a.setWantsLayer(!0),a.layer().setBackgroundColor(CGColorCreateGenericRGB(1,1,1,1)),a.layer().setBorderColor(CGColorCreateGenericRGB(186/255,186/255,186/255,1)),a.layer().borderWidth=1;var o=i.default.createLabel("#000000",60,20,100,20);a.addSubview(o);var n=NSButton.alloc().initWithFrame(NSMakeRect(5,15,50,30));n.setButtonType(NSMomentaryChangeButton),n.setImage(i.default.getImageByColor(NSColor.colorWithRed_green_blue_alpha(0,0,0,1),{width:40,height:30})),n.setBordered(!1);var s=AMOMain.alloc().init();n.setCOSJSTargetFunction(function(){s.openPopover_onView_withWebview(n,t.view,i.default.createWebview(e,n,function(e){t.colorPickerColor=e,o.setStringValue_("#"+String(e.immutableModelObject().hexValue()))}))}),a.addSubview(n),this.pickerView=a,this.colorPickerLabel=r}function f(e){var t=e?NSColor.controlTextColor():s;this.colorLibsMenuParamsLabel.setTextColor(t),this.colorLibsMenuParams.setEnabled(e)}function m(e){this.colorsMenuParamsLabel.setTextColor(b(e)),this.colorsMenuParams.setEnabled(e)}function g(e){this.radioParams.setEnabled(e),this.radioButtonLabel.setTextColor(b(e))}function S(){this.view.addSubview(this.colorLibsMenuParams),this.view.addSubview(this.colorsMenuParams),this.view.addSubview(this.colorLibsMenuParamsLabel),this.view.addSubview(this.colorsMenuParamsLabel)}function p(){this.pickerView.removeFromSuperview(),this.colorPickerLabel.removeFromSuperview()}function b(e){return e?NSColor.controlTextColor():s}t.setEnabledColorMenu=m,t.importModal=function(e){var t=void 0;this.settingsValues=o.default.getSettings(e,"default"),this.modalParams={messageText:"Configure your import",informativeText:"Your icons will be arranged in artboards. Set size and padding of your artboards.",width:300,lineHeight:35},o.default.hasValue(this.settingsValues.presets)?(this.modalParams.height=300+30*this.settingsValues.presets.data.split(",").length,t=!0):(this.modalParams.height=300,t=!1);this.modalParams.height=o.default.hasValue(this.settingsValues.presets)?300+30*this.settingsValues.presets.data.split(",").length:300,this.coeffCurrentHeight=0,this.isLibrarySource=!0,this.adjustHeight=0,l(),t?function(){var e=this,t=this.settingsValues.presets.data.split(",").map(function(e){var t=e.split("-");return{artboardSize:t[0],padding:t[1]?t[1]:0}});this.presets=[];var r=i.default.createLabel("Presets",0,this.modalParams.height-this.modalParams.lineHeight,150,20);this.view.addSubview(r);var a=i.default.createLabel("Size",180,this.modalParams.height-this.modalParams.lineHeight,100,20);this.view.addSubview(a);var o=i.default.createLabel("Padding",240,this.modalParams.height-this.modalParams.lineHeight,100,20);this.view.addSubview(o),this.coeffCurrentHeight++,t.forEach(function(t){e.coeffCurrentHeight++,function(e,t){var r=NSButton.alloc().initWithFrame(NSMakeRect(150,t,30,20));r.setState(!0),r.setButtonType(NSSwitchButton),r.setFont(NSFont.systemFontOfSize_(13)),r.setTitle(""),this.view.addSubview(r);var i=NSTextField.alloc().initWithFrame(NSMakeRect(180,t,50,20));i.setStringValue(e.artboardSize),this.view.addSubview(i);var a=NSTextField.alloc().initWithFrame(NSMakeRect(240,t,50,20));a.setStringValue(e.padding),this.view.addSubview(a);var o={sizeBox:i,paddingBox:a,presetCheckBox:r};(function(e){e.presetCheckBox.setCOSJSTargetFunction(function(){e.sizeBox.setEnabled(e.presetCheckBox.state()),e.paddingBox.setEnabled(e.presetCheckBox.state())})})(o),this.presets.push(o)}(t,e.modalParams.height-e.modalParams.lineHeight*e.coeffCurrentHeight)})}():c();this.view.addSubview(i.default.createDivider(NSMakeRect(0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-10,this.modalParams.width,1))),this.adjustHeight=5,function(){this.coeffCurrentHeight++;var e=i.default.createLabel("Symbols",0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,150,20);this.view.addSubview(e);var t=NSButton.alloc().initWithFrame(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,200,20));t.setButtonType(NSSwitchButton),t.setState(!0),t.setFont(NSFont.systemFontOfSize_(13)),t.setTitle("Convert to symbol"),this.view.addSubview(t),this.symbolParams=t}(),this.view.addSubview(i.default.createDivider(NSMakeRect(0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-15,this.modalParams.width,1))),this.adjustHeight=8,function(){this.coeffCurrentHeight++;var e=i.default.createLabel("Mask",0,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,150,20);this.view.addSubview(e);var t=NSButton.alloc().initWithFrame(NSMakeRect(150,this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight-this.adjustHeight,200,20));t.setButtonType(NSSwitchButton),t.setState(!1),t.setFont(NSFont.systemFontOfSize_(13)),t.setTitle("Add color mask"),this.view.addSubview(t),this.checkboxMaskParams=t}(),u(),d(e),f(!1),m(!1),g(!1),h(e),function(){var e=this;this.checkboxMaskParams.setCOSJSTargetFunction(function(t){t.state()?(g(!0),f(!0),e.colorsMenuParams.numberOfItems()>0&&m(!0)):(g(!1),f(!1),m(!1),S(),p(),e.radioParams.cells()[0].state=!0,e.radioParams.cells()[1].state=!1)})}();var r={button:this.modal.runModal(),convertSymbol:this.symbolParams.state(),withMask:!!this.checkboxMaskParams.state()};t?(r.presets=[],this.presets.forEach(function(e){e.presetCheckBox.state()&&r.presets.push({artboardSize:parseInt(e.sizeBox.stringValue()),iconPadding:parseInt(e.paddingBox.stringValue())})})):(r.artboardSize=parseInt(this.artboardSize.stringValue()),r.iconPadding=parseInt(this.artboardPadding.stringValue()));if(r.withMask&&this.isLibrarySource){var a=this.colorsMenuParams.selectedItem();r.color=a?this.colorsMenuParams.representedObject():null;var n=this.colorLibsMenuParams.selectedItem();r.colorLib=n?this.colorLibsMenuParams.representedObject():null,r.color||(r.withMask=!1)}else r.withMask&&(r.colorPicker=this.colorPickerColor||MSColor.blackColor());return r},t.maskModal=function(e){this.modalParams={messageText:"Configure your color mask",informativeText:"Select your library and choose a color to apply as mask. Your layers will all be combined.",height:160,width:300,lineHeight:35},this.coeffCurrentHeight=0,this.isLibrarySource=!0,this.adjustHeight=0,l(),u(),d(e),h(e);var t={button:this.modal.runModal()};if(this.isLibrarySource){var r=this.colorsMenuParams.selectedItem();t.color=r?this.colorsMenuParams.representedObject():null;var i=this.colorLibsMenuParams.selectedItem();t.colorLib=i?this.colorLibsMenuParams.representedObject():null}else t.colorPicker=this.colorPickerColor;return t},t.constructBase=l},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=l(r(0)),a=l(r(1)),o=l(r(4)),n=l(r(3)),s=l(r(2));function l(e){return e&&e.__esModule?e:{default:e}}t.default={initImport:function(e,t,r){var a=i.default.getRootObject(e);if(t.yOrigin=h(e,a).yOrigin,t.presets){var o=a;t.presets.forEach(function(n){!function(e,t){e.iconPadding=t.iconPadding,c.height=c.width=t.artboardSize}(t,n),t.xOrigin=h(e,u).xOrigin,t.artboardSize=n.artboardSize,t.prefix=i.default.buildPrefix(e,t.artboardSize),o&&0===a.length&&e.document.currentPage().addLayers([function(e,t){var r=MSTextLayer.new();r.setStringValue_(String(e.artboardSize)+"px");var i=NSFontManager.sharedFontManager().fontWithFamily_traits_weight_size("Helvetica neue",NSBoldFontMask,0,c.titleFontSize);r.setFont(i),r.lineHeight=48,r.setName(String(e.artboardSize)+"px");var a=r.frame();return a.setX(t),a.setY(-(32+r.lineHeight())),r}(n,t.xOrigin)]),c.iconsByLine=parseInt(s.default.getSettings(e,"default").iconsByLine.data),r(e,t)})}else t.prefix=i.default.buildPrefix(e,t.artboardSize),c.height=c.width=t.artboardSize,c.iconsByLine=parseInt(s.default.getSettings(e,"default").iconsByLine.data),r(e,t);var n=t.listIcon.length*(t.presets.length||1);return e.document.showMessage("üéâ Tadaaa! üéâ "+n+" icon"+(t.listIcon.length>1?"s":"")+" imported"),n},initImportIcons:async function(e,t){i.default.clearSelection(e),t.listIcon.forEach(function(r,n){try{var s=i.default.getIconNameByNSUrl(r),l=d(e,n,s,t),c=String(r.toString().split(".").pop()).toLowerCase();if("pdf"===c)return o.default.addPDF(e,l,t,r);if("png"===c||"jpg"===c||"jpeg"===c)return o.default.addBITMAP(e,l,t,r);var h=String(NSString.alloc().initWithContentsOfURL(r));f(e,l,t,h),u.push(l)}catch(e){a.default.error(e)}}),i.default.clearSelection(e)},getPaddingAndSize:function(e,t){var r=e.command.valueForKey_onLayer("padding",t);if(!r){var i=t.layers()[0].rect();r=Math.min(i.origin.x,i.origin.y)}return{iconPadding:parseInt(r),artboardSize:parseInt(t.rect().size.width)}},initOrganizeIcons:function(e,t){t.listIcon.forEach(async function(r,i){try{var n=d(e,i,r.name(),t);if("MSBitmapLayer"===String(r.class()))return o.default.addBITMAP(e,n,t,r);var s=MSImmutableLayerAncestry.ancestryWithMSLayer_(r),l=MSExportRequest.exportRequestsFromLayerAncestry_(s).firstObject();l.format="svg";var c=MSExporter.exporterForRequest_colorSpace_(l,NSColorSpace.sRGBColorSpace()),h=NSString.alloc().initWithData_encoding(c.data(),NSUTF8StringEncoding);await f(e,n,t,String(h)),u.push(n)}catch(e){a.default.error(e)}})}};var c={iconsByLine:10,sizeBetweenPreset:200,titleFontSize:32},u=[];function d(e,t,r,a){var o=s.default.getSettings(e,"default").marginBetweenRootObject,n=i.default.getSizeBetweenIcon(c.width,o.data);0===t?(c.y=a.yOrigin,c.x=a.xOrigin||0):t%c.iconsByLine==0?(c.y+=n,c.x=a.xOrigin||0):c.x+=n;var l=MSArtboardGroup.new();return l.setName(""+String(a.prefix)+String(r)),function(e,t){var r=e.frame();r.setWidth(t.width),r.setHeight(t.height),r.setX(t.x),r.setY(t.y)}(l,c),e.document.currentPage().addLayers([l]),a.convertSymbol?MSSymbolMaster.convertArtboardToSymbol(l):l}function h(e,t){var r=[],i=[],a=0;t.forEach(function(e){var t=e.frame().height(),o=e.origin();r.push(o.y-a),i.push(o.x-a),t>a&&(a=t)});var o=0!==r.length?Math.max.apply(Math,r):0,n=0!==i.length?Math.max.apply(Math,i)+a:0;return{yOrigin:0===t.length?o:o+100+a,xOrigin:0===t.length?n:n+100+a}}function f(e,t,r,i){return o.default.addSVG(e,t,r,i,!0),r.withMask&&n.default.addColor(e,t,r),e.command.setValue_forKey_onLayer(r.iconPadding,"padding",t)}},function(e,t,r){(function(t,i){if("production"!==t.env.NODE_ENV){var a=r(16),o=r(18),n=r(20)}function s(e,r){var s=Array.prototype.slice.call(r);if(s.forEach(function(e){try{log(i._skpmPrefix+function(){for(var e="",t=0;t<l;t++)e+="  ";l>0&&(e+="| ");return e}()+e)}catch(t){log(e)}}),"production"!==t.env.NODE_ENV){if(!o.isDebuggerPresent())return;var c={ts:Date.now(),type:e,plugin:String(context.scriptPath),values:s.map(a.prepareValue),stack:a.prepareStackTrace((new Error).stack)};o.sendToDebugger(n.ADD_LOG,c)}}i._skpmPrefix="console> ";var l=0;var c=i.group;i.group=function(){c&&c.apply(this,arguments),l+=1,"production"!==t.env.NODE_ENV&&o.sendToDebugger(n.GROUP,{plugin:String(context.scriptPath),collapsed:!1})};var u=i.groupCollapsed;i.groupCollapsed=function(){u&&u.apply(this,arguments),l+=1,"production"!==t.env.NODE_ENV&&o.sendToDebugger(n.GROUP,{plugin:String(context.scriptPath),collapsed:!0})};var d=i.groupEnd;i.groupEnd=function(){d&&d.apply(this,arguments),(l-=1)<0&&(l=0),"production"!==t.env.NODE_ENV&&o.sendToDebugger(n.GROUP_END,{plugin:context.scriptPath})};var h={},f=i.count;i.count=function(e){return h[e=void 0!==e?e:"Global"]=(h[e]||0)+1,f&&f.apply(this,arguments),s("log",[e+": "+h[e]])};var m={},g=i.time;i.time=function(e){if(g&&g.apply(this,arguments),m[e=void 0!==e?e:"default"])return s("warn",['Timer "'+e+'" already exists']);m[e]=Date.now()};var S=i.timeEnd;i.timeEnd=function(e){if(S&&S.apply(this,arguments),!m[e=void 0!==e?e:"default"])return s("warn",['Timer "'+e+'" does not exist']);var t=Date.now()-m[e];return delete m[e],s("log",[e+": "+t/1e3+"ms"])};var p=i.log;i.log=function(){return p&&p.apply(this,arguments),s("log",arguments)};var b=i.warn;i.warn=function(){return b&&b.apply(this,arguments),s("warn",arguments)};var v=i.error;i.error=function(){return v&&v.apply(this,arguments),s("error",arguments)};var y=i.assert;i.assert=function(e,t){if(y&&y.apply(this,arguments),!e)return s("assert",[t])};var w=i.info;i.info=function(){return w&&w.apply(this,arguments),s("info",arguments)};var P=i.clear;i.clear=function(){if(P&&P(),"production"!==t.env.NODE_ENV)return o.sendToDebugger(n.CLEAR_LOGS)},i._skpmEnabled=!0,e.exports=i}).call(t,r(14),r(8))},function(e,t,r){var i,a,o=[];if(r(15)()){o=[];i=function(e,t,r,i,a,n,s,l,c,u,d,h){var f=o.length;return o.push(coscript.scheduleWithInterval_jsFunction((t||0)/1e3,function(){e(r,i,a,n,s,l,c,u,d,h)})),f},a=function(e){var t=o[e];t&&(t.cancel(),o[e]=void 0)}}else i=function(e,t,r,i,n,s,l,c,u,d,h,f){coscript.shouldKeepAround=!0;var m=o.length;return o.push(!0),coscript.scheduleWithInterval_jsFunction((t||0)/1e3,function(){o[m]&&e(r,i,n,s,l,c,u,d,h,f),a(m),o.every(function(e){return!e})&&(coscript.shouldKeepAround=!1)}),m},a=function(e){o[e]=!1};e.exports={setTimeout:i,clearTimeout:a}},function(e,t){e.exports=function(e){var t=e.split("\n");return t=(t=t.map(function(e){return e.replace(/\sg/,"")})).map(function(e){var t=e.split("@"),r=t.shift(),i=t.join("@");0===r.indexOf("/Users/")&&(i=r+(i?"@"+i:""),r=null),i||(i=e,r=null);var a=i.split(":"),o=(i=a[0]).split("/");return{fn:r,file:o=o[o.length-1],filePath:i,line:a[1],column:a[2]}})}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e;for(var t=[],r=0;r<(e||[]).length;r+=1)t.push(e[r]);return t}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.importIcons=function(e){i.default.runFramework(e);var t=(0,c.importModal)(e);if(1e3!==t.button)return;if(t.listIcon=s.default.selectIconsFiles(),!t.listIcon.length)return;var r=a.default.initImport(e,t,a.default.initImportIcons),o=t.withMask?"import-mask":"import";h.default.action(e,"icons","import",o,r)},t.updateIconsOnSelectedArtboards=function(e){var t=i.default.getSelectedArtboardsAndSymbols(e);if(0===t.length)return n.default.newErrorModal("No artboards selected","Please select one or more artboards to replace icons.");var r={};if(r.listIcon=s.default.selectIconsFiles(),!r.listIcon.length)return;if(t.length>r.listIcon.length&&1!==r.listIcon.length)return n.default.newErrorModal("Too much artboards selected","Please select as many artboards as icons.");if(t.length<r.listIcon.length&&1!==r.listIcon.length)return n.default.newErrorModal("Too much icons selected","Please select as many icons as artboards.");var a=l.default.initUpdateIconsSelectedArtboards(e,t,r);h.default.action(e,"icons","replace","replace",a)},t.organizeIcons=function(e){var t=e.selection;if(0===t.length)return n.default.newErrorModal("No layers selected","Please select one or more layers.");i.default.runFramework(e);var r=(0,c.importModal)(e);if(1e3!==r.button)return;r.listIcon=t,a.default.initImport(e,r,a.default.initOrganizeIcons),r.listIcon.forEach(function(e){return e.removeFromParent()});var o=r.withMask?"organize-mask":"organize";h.default.action(e,"icons","organize",o,r.listIcon.length)},t.addMaskOnSelectedArtboards=function(e){i.default.runFramework(e);var t=i.default.getSelectedArtboardsAndSymbols(e);if(0===t.length)return n.default.newErrorModal("No artboards selected","Please select one or more artboards to add a mask.");var r=(0,c.maskModal)(e);if(1e3!==r.button)return;o.default.initAddMaskOnSelectedArtboards(e,r,t),h.default.action(e,"icons","mask","mask",t.length)},t.removeMaskOnSelectedArtboards=function(e){var t=i.default.getSelectedArtboardsAndSymbols(e);if(0===t.length)return n.default.newErrorModal("No artboards selected","Please select one or more artboards to add a mask.");t.forEach(function(t){o.default.removeMask(e,t.object)}),h.default.action(e,"icons","remove mask","remove mask",t.length)},t.setSettings=function(e){var t=(0,u.default)(e);if(1001===t.button)return;d.default.registerSettings(e,t),h.default.action(e,"settings","settings","settings")};var i=f(r(0)),a=f(r(7)),o=f(r(3)),n=f(r(22)),s=f(r(23)),l=f(r(4)),c=r(6),u=f(r(24)),d=f(r(2)),h=f(r(25));function f(e){return e&&e.__esModule?e:{default:e}}},function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function MochaJSDelegate(selectorHandlerDict){var uniqueClassName="MochaJSDelegate_DynamicClass_"+NSUUID.UUID().UUIDString(),delegateClassDesc=MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName,NSObject);delegateClassDesc.registerClass();var handlers={};if(this.setHandlerForSelector=function(selectorString,func){var handlerHasBeenSet=selectorString in handlers,selector=NSSelectorFromString(selectorString);if(handlers[selectorString]=func,!handlerHasBeenSet){for(var dynamicHandler=function(){var e=handlers[selectorString];if(e)return e.apply(delegateClassDesc,arguments)},args=[],regex=/:/g;match=regex.exec(selectorString);)args.push("arg"+args.length);dynamicFunction=eval("(function("+args.join(",")+"){ return dynamicHandler.apply(this, arguments); })"),delegateClassDesc.addInstanceMethodWithSelector_function_(selector,dynamicFunction)}},this.removeHandlerForSelector=function(e){delete handlers[e]},this.getHandlerForSelector=function(e){return handlers[e]},this.getAllHandlers=function(){return handlers},this.getClass=function(){return NSClassFromString(uniqueClassName)},this.getClassInstance=function(){return NSClassFromString(uniqueClassName).new()},"object"==(void 0===selectorHandlerDict?"undefined":_typeof(selectorHandlerDict)))for(var selectorString in selectorHandlerDict)this.setHandlerForSelector(selectorString,selectorHandlerDict[selectorString])}exports.default=MochaJSDelegate},function(e,t,r){(function(t,r){var i,a,o=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===t)return t(e,0);if((i===n||!i)&&t)return i=t,t(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof t?t:n}catch(e){i=n}try{a="function"==typeof r?r:s}catch(e){a=s}}();var c,u=[],d=!1,h=-1;function f(){d&&c&&(d=!1,c.length?u=c.concat(u):h=-1,u.length&&m())}function m(){if(!d){var e=l(f);d=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,d=!1,function(e){if(a===r)return r(e);if((a===s||!a)&&r)return a=r,r(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function S(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new g(e,t)),1!==u.length||d||l(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=S,o.addListener=S,o.once=S,o.off=S,o.removeListener=S,o.removeAllListeners=S,o.emit=S,o.prependListener=S,o.prependOnceListener=S,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}).call(t,r(9).setTimeout,r(9).clearTimeout)},function(e,t){e.exports=function(){return"undefined"!=typeof coscript&&coscript.createFiber}},function(e,t,r){var i=r(17);e.exports.toArray=r(11),e.exports.prepareStackTrace=r(10),e.exports.prepareValue=i,e.exports.prepareObject=i.prepareObject,e.exports.prepareArray=i.prepareArray},function(e,t,r){var i=r(10),a=r(11);function o(e,t){return e.map(function(e){return c(e,t)})}function n(e,t){const r={};return Object.keys(e).forEach(function(i){r[i]=c(e[i],t)}),r}function s(e){return{type:"String",primitive:"String",value:String(e.name())}}function l(e){return{type:"String",primitive:"String",value:String(e.selector())}}function c(e,t){var r="String",u="String";const d=typeof e;return e instanceof Error?(r="Error",u="Error",e={message:e.message,name:e.name,stack:i(e.stack)}):Array.isArray(e)?(r="Array",u="Array",e=o(e,t)):null===e||void 0===e||Number.isNaN(e)?(r="Empty",u="Empty",e=String(e)):"object"===d?e.isKindOfClass&&"function"==typeof e.class?"NSDictionary"===(r=String(e.class()))||"__NSDictionaryM"===r||"__NSSingleEntryDictionaryI"===r||"__NSDictionaryI"===r||"__NSCFDictionary"===r?(u="Object",e=n(Object(e),t)):"NSArray"===r||"NSMutableArray"===r||"__NSArrayM"===r||"__NSSingleObjectArrayI"===r||"__NSArray0"===r?(u="Array",e=o(a(e),t)):"NSString"===r||"__NSCFString"===r||"NSTaggedPointerString"===r||"__NSCFConstantString"===r?(u="String",e=String(e)):"__NSCFNumber"===r||"NSNumber"===r?(u="Number",e=0+e):"MOStruct"===r?(r=String(e.name()),u="Object",e=e.memberNames().reduce(function(r,i){return r[i]=c(e[i],t),r},{})):e.class().mocha?(u="Mocha",e=(t||{}).skipMocha?r:function(e,t){t=t||{};var r=e.class().mocha(),i={properties:{type:"Array",primitive:"Array",value:a(r["properties"+(t.withAncestors?"WithAncestors":"")]()).map(s)},classMethods:{type:"Array",primitive:"Array",value:a(r["classMethods"+(t.withAncestors?"WithAncestors":"")]()).map(l)},instanceMethods:{type:"Array",primitive:"Array",value:a(r["instanceMethods"+(t.withAncestors?"WithAncestors":"")]()).map(l)},protocols:{type:"Array",primitive:"Array",value:a(r["protocols"+(t.withAncestors?"WithAncestors":"")]()).map(s)}};return r.treeAsDictionary&&t.withTree&&(i.treeAsDictionary={type:"Object",primitive:"Object",value:n(r.treeAsDictionary())}),i}(e,t)):(u="Unknown",e=r):(r="Object",u="Object",e=n(e,t)):"function"===d?(r="Function",u="Function",e=String(e)):!0===e||!1===e?(r="Boolean",u="Boolean"):"number"===d&&(u="Number",r="Number"),{value:e,type:r,primitive:u}}e.exports=c,e.exports.prepareObject=n,e.exports.prepareArray=o},function(e,t,r){var i=r(19);e.exports.identifier="skpm.debugger",e.exports.isDebuggerPresent=i.isWebviewPresent.bind(this,e.exports.identifier),e.exports.sendToDebugger=function(t,r){return i.sendToWebview(e.exports.identifier,"sketchBridge("+JSON.stringify({name:t,payload:r})+");")}},function(e,t){var r=NSThread.mainThread().threadDictionary();e.exports.isWebviewPresent=function(e){return!!r[e]},e.exports.sendToWebview=function(t,i){if(!e.exports.isWebviewPresent(t))throw new Error("Webview "+t+" not found");var a=r[t].contentView().subviews();return(a=a[a.length-1]).stringByEvaluatingJavaScriptFromString(i)}},function(e,t){e.exports.SET_TREE="elements/SET_TREE",e.exports.SET_PAGE_METADATA="elements/SET_PAGE_METADATA",e.exports.SET_LAYER_METADATA="elements/SET_LAYER_METADATA",e.exports.ADD_LOG="logs/ADD_LOG",e.exports.CLEAR_LOGS="logs/CLEAR_LOGS",e.exports.GROUP="logs/GROUP",e.exports.GROUP_END="logs/GROUP_END",e.exports.TIMER_START="logs/TIMER_START",e.exports.TIMER_END="logs/TIMER_END",e.exports.ADD_REQUEST="network/ADD_REQUEST",e.exports.SET_RESPONSE="network/SET_RESPONSE",e.exports.ADD_ACTION="actions/ADD_ACTION",e.exports.SET_SCRIPT_RESULT="playground/SET_SCRIPT_RESULT"},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i,a=r(3),o=(i=a)&&i.__esModule?i:{default:i};t.default={switchToV4:function(e,t){var r=t.lastLayer(),i={color:null,colorLib:null,colorPicker:null};if("MSSymbolInstance"===String(r.class())){var a=r.symbolMaster(),n=a.foreignSymbol();i.color=a,n&&(i.color=String(n.originalMaster().symbolID()),i.colorLib=n)}else i.colorPicker=r.style().fills()[0].color();o.default.registerMask(e,t,i)}}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=o(r(5)),a=o(r(0));o(r(1));function o(e){return e&&e.__esModule?e:{default:e}}t.default={newModal:function(e,t,r){var i=COSAlertWindow.new(),a=NSView.alloc().initWithFrame(NSMakeRect(0,0,t.width,t.height));return i.addAccessoryView(a),i.setMessageText(r.messageText),i.setInformativeText(r.informativeText),i.addButtonWithTitle("Continue"),i.addButtonWithTitle("Cancel"),i.layout(),{modal:i,view:a,viewSize:t}},runModal:function(e){return e.modal.runModal()},getMainButtonParam:function(e){return{button:e}},createArtboardFields:function(){var e=NSTextField.alloc().initWithFrame(NSMakeRect(0,10,130,20));e.setStringValue("24");var t=NSTextField.alloc().initWithFrame(NSMakeRect(140,10,130,20));return t.setStringValue("3"),[{item:e,getter:function(){return parseInt(e.stringValue())},name:"artboardSize",label:a.default.createLabel("Size",0,30,130,20)},{item:t,getter:function(){return parseInt(t.stringValue())},name:"iconPadding",label:a.default.createLabel("Padding",140,30,130,20)}]},createCheckBoxes:function(){var e=NSButton.alloc().initWithFrame(NSMakeRect(0,30,200,14));e.setButtonType(NSSwitchButton),e.setState(!0),e.setFont(NSFont.systemFontOfSize_(13)),e.setTitle("Convert to symbol");var t=NSButton.alloc().initWithFrame(NSMakeRect(0,5,200,14));return t.setButtonType(NSSwitchButton),t.setState(!1),t.setFont(NSFont.systemFontOfSize_(13)),t.setTitle("Add color mask"),[{item:e,name:"convertSymbol",getter:e.state},{item:t,name:"withMask",getter:t.state}]},createMaskFields:function(e,t,r){var o=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,0,130,20)),n=NSPopUpButton.alloc().initWithFrame(NSMakeRect(140,0,130,20));o.setEnabled(!1),n.setEnabled(!1),o.menu=i.default.initLibsSelectList(AppController.sharedInstance().librariesController().availableLibraries(),n),r?r[1].item.setCOSJSTargetFunction(function(e){e.state()?(o.setEnabled(!0),n.selectedItem()&&n.setEnabled(!0)):(o.setEnabled(!1),n.setEnabled(!1))}):o.setEnabled(!0);return[{item:n,label:a.default.createLabel("Color",140,25,130,20),name:"color",getter:function(){return function(){var e=this.item.selectedItem();return e?e.representedObject():null}}()},{item:o,label:a.default.createLabel("Colors Library",0,25,130,20),name:"colorLib",getter:function(){return function(){var e=this.item.selectedItem();return e?e.representedObject():null}}()}]},appendsFields:function(e,t,r){var i=e.view,a=e.viewSize;t.reverse().forEach(function(e){var t=r?50*i.subviews().length+25:50*i.subviews().length,o=NSView.alloc().initWithFrame(NSMakeRect(0,t,a.width,50));e.forEach(function(e){e.label&&o.addSubview(e.label),e.item&&o.addSubview(e.item)}),i.addSubview(o)})},getParams:function(e){var t={};return e.forEach(function(e){e.forEach(function(e){t[e.name]=e.getter()})}),t},setNextKey:function(e){e.forEach(function(t,r){e[r+1]&&t.item&&t.item.setNextKeyView(e[r+1].item)})},newErrorModal:function(e,t){var r=COSAlertWindow.new();r.setMessageText(e),r.setInformativeText(t),r.runModal()}}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i,a=r(1);(i=a)&&i.__esModule;t.default={selectIconsFiles:function(){var e=NSOpenPanel.openPanel();if(e.setAllowsMultipleSelection(!0),e.setCanChooseDirectories(!0),e.setAllowedFileTypes(o),e.setCanChooseFiles(!0),e.setPrompt("Select"),e.runModal()!==NSFileHandlingPanelOKButton)return[];var t=[];return function e(t,r){for(var i=0;i<t.length;i++)if(t[i].hasDirectoryPath())e(NSFileManager.defaultManager().contentsOfDirectoryAtURL_includingPropertiesForKeys_options_error(t[i],null,null,null),r);else{var a=String(t[i].pathExtension()).toLowerCase();-1!==o.indexOf(a)&&r.push(t[i])}}(e.URLs(),t),t}};var o=["svg","pdf","png","jpg","jpeg"]},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),a=n(r(0)),o=n(r(2));function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight+t,i=a.default.createLabel(e,0,r,400,20,!0);this.view.addSubview(i)}t.default=function(e){return this.settingsValues=o.default.getSettings(e,"placeholder"),this.modalParams={messageText:"Settings",informativeText:"Customize your imports using presets and other features.",height:73*(Object.keys(this.settingsValues).length+1),width:340,lineHeight:45},this.coeffCurrentHeight=0,this.adjustHeight=0,this.marginLeftColRight=130,this.adjust=-5,this.lineOne=15,this.lineTwo=0,(0,i.constructBase)("Save"),function(){this.coeffCurrentHeight++;var e=this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight+this.adjust,t=a.default.createLabel("Size Presets",0,e,this.marginLeftColRight,20);this.view.addSubview(t);var r=NSTextField.alloc().initWithFrame(NSMakeRect(this.marginLeftColRight,e,145,21));o.default.hasValue(this.settingsValues.presets)?r.setStringValue(String(this.settingsValues.presets.value)):r.setPlaceholderString(String(this.settingsValues.presets.placeholder)),this.view.addSubview(r),this.coeffCurrentHeight++,s("Set your artboard sizes and padding.",this.lineOne),s("Format: size-padding",this.lineTwo),this.presets=r}(),function(){this.coeffCurrentHeight++;var e=this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight+this.adjust,t=a.default.createLabel("Add Prefix ",0,e,this.marginLeftColRight,20);this.view.addSubview(t);var r=NSTextField.alloc().initWithFrame(NSMakeRect(this.marginLeftColRight,e,145,21));o.default.hasValue(this.settingsValues.prefixRootObject)?r.setStringValue(String(this.settingsValues.prefixRootObject.value)):r.setPlaceholderString(String(this.settingsValues.prefixRootObject.placeholder)),this.view.addSubview(r),this.coeffCurrentHeight++,s("Add a path structure to the name of yours icons.",this.lineOne),s("$size is equal to the size of the artboard.",this.lineTwo),this.prefixRootObject=r}(),function(){this.coeffCurrentHeight++;var e=this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight+this.adjust,t=a.default.createLabel("Icons Grid",0,e,this.marginLeftColRight,20);this.view.addSubview(t);var r=NSTextField.alloc().initWithFrame(NSMakeRect(this.marginLeftColRight,e,50,21));"null"===String(this.settingsValues.iconsByLine.value)?r.setPlaceholderString("10"):r.setStringValue(String(this.settingsValues.iconsByLine.value)),this.view.addSubview(r);var i=a.default.createLabel("icons per row",this.marginLeftColRight+55,e,100,20);this.view.addSubview(i),this.coeffCurrentHeight++,s("Set the number of imported icons per row.",this.lineOne),this.iconsByLine=r}(),function(){this.coeffCurrentHeight++;var e=this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight+15,t=a.default.createLabel("Spacing",0,e,this.marginLeftColRight,20);this.view.addSubview(t);var r=NSTextField.alloc().initWithFrame(NSMakeRect(this.marginLeftColRight,e,50,21));o.default.hasValue(this.settingsValues.marginBetweenRootObject)?r.setStringValue(String(this.settingsValues.marginBetweenRootObject.value)):r.setPlaceholderString(String(this.settingsValues.marginBetweenRootObject.placeholder)),this.view.addSubview(r);var i=a.default.createLabel("px or %",this.marginLeftColRight+55,e,100,20);this.view.addSubview(i),this.coeffCurrentHeight++,s("Set the spacing between the imported icons.",this.lineOne+15),this.marginBetweenRootObject=r}(),function(){this.coeffCurrentHeight++;var e=this.modalParams.height-this.modalParams.lineHeight*this.coeffCurrentHeight+30,t=a.default.createLabel("Stroke to Fill",0,e,this.marginLeftColRight,20);this.view.addSubview(t);var r=NSButton.alloc().initWithFrame(NSMakeRect(this.marginLeftColRight,e,200,21));r.setButtonType(NSSwitchButton),r.setState(parseInt(this.settingsValues.convertStroke.data)),r.setFont(NSFont.systemFontOfSize_(13)),r.setTitle("Auto-Convert"),this.view.addSubview(r),this.coeffCurrentHeight++,s("This will allow you to add a dynamic color mask ",this.lineOne+30),s("over your outlined icons.",this.lineTwo+30),this.convertStroke=r}(),{button:this.modal.runModal(),presets:String(this.presets.stringValue()).replace(/ /g,""),iconsByLine:parseInt(this.iconsByLine.stringValue())||null,convertStroke:this.convertStroke.state(),marginBetweenRootObject:this.marginBetweenRootObject.stringValue().replace(/ /g,""),prefixRootObject:this.prefixRootObject.stringValue()}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=NSUserDefaults.standardUserDefaults().objectForKey("google.analytics.uuid");r||(r=NSUUID.UUID().UUIDString(),NSUserDefaults.standardUserDefaults().setObject_forKey(r,"google.analytics.uuid")),t.default={action:function(e,t,i,a,o){!function(e){try{var t=NSURL.URLWithString(NSString.stringWithFormat("https://www.google-analytics.com/collect%@",(a=e,"?"+Object.keys(a).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(a[e])}).join("&"))));if(t){var r=NSTask.alloc().init();r.setLaunchPath("/usr/bin/curl"),r.setArguments(["-X","POST",String(t)]);var i=NSPipe.pipe();r.setStandardOutput(i),r.launch()}}catch(e){}var a}({v:1,t:"event",cid:r,tid:"UA-115448236-1",ec:t,ea:i,el:a,ev:o})}}}]);"default"===key&&"function"==typeof exports?exports(context):exports[key](context)}that.importIcons=__skpm_run.bind(this,"importIcons"),that.onRun=__skpm_run.bind(this,"default"),that.updateIconsOnSelectedArtboards=__skpm_run.bind(this,"updateIconsOnSelectedArtboards"),that.addMaskOnSelectedArtboards=__skpm_run.bind(this,"addMaskOnSelectedArtboards"),that.addMaskOnSelectedArtboards=__skpm_run.bind(this,"addMaskOnSelectedArtboards"),that.removeMaskOnSelectedArtboards=__skpm_run.bind(this,"removeMaskOnSelectedArtboards"),that.setSettings=__skpm_run.bind(this,"setSettings"),that.organizeIcons=__skpm_run.bind(this,"organizeIcons");